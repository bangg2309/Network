package exam12;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Exam12 {
	private static void writeToFile(String pathFile, List<Student> students) throws IOException {
		DataOutputStream dos = new DataOutputStream(new FileOutputStream(pathFile));
		dos.writeInt(students.size());
		for (Student student : students) {
			dos.writeInt(student.getId());
			dos.writeUTF(student.getName());
			dos.writeInt(student.getCourses().size());
			for (Course course : student.getCourses()) {
				dos.writeUTF(course.getName());
				dos.writeDouble(course.getScore());
			}
		}
		dos.close();
	}

	private static List<Student> loadFile(String pathFile) throws IOException {
		List<Student> students = new ArrayList<>();
		DataInputStream dis = new DataInputStream(new FileInputStream(pathFile));
		int sizeStudent = dis.readInt();
		int id;
		String nameStudent;
		for (int i = 0; i < sizeStudent; i++) {
			id = dis.readInt();
			nameStudent = dis.readUTF();
			Student student = new Student(id, nameStudent);
			int sizeCourse = dis.readInt();
			List<Course> courses = new ArrayList<>();
			for (int j = 0; j < sizeCourse; j++) {
				String nameCourse = dis.readUTF();
				int score = dis.readInt();
				Course course = new Course(nameCourse, score);
				courses.add(course);
			}
			student.setCourses(courses);
			students.add(student);
		}

		return students;
	}
	
	public static void main(String[] args) {
		
	}
}
